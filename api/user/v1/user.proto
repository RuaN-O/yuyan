syntax = "proto3";

package user.v1;

option go_package = "yuyan/api/user/v1;v1";


import "google/api/annotations.proto";

// 用户服务
service UserService {
  // 用户注册
  rpc Register (RegisterRequest) returns (RegisterReply) {
    option (google.api.http) = {
      post: "/api/v1/user/register"
      body: "*"
    };
  }
  
  // 用户登录
  rpc Login (LoginRequest) returns (LoginReply) {
    option (google.api.http) = {
      post: "/api/v1/user/login"
      body: "*"
    };
  }
  
  // 获取用户信息
  rpc GetUser (GetUserRequest) returns (GetUserReply) {
    option (google.api.http) = {
      get: "/api/v1/user"
    };
  }
}

// 注册请求
message RegisterRequest {
  string username = 1;
  string password = 2;
}

// 注册响应
message RegisterReply {
  string token=1;
}

// 登录请求
message LoginRequest {
  string username = 1;
  string password = 2;
}

// 登录响应
message LoginReply {
  string token=1;
}

// 获取用户请求
message GetUserRequest {
}

// 获取用户响应
message GetUserReply {
  uint32 code = 1;
  string message = 2;
  User user = 3;
}

// 用户信息
message User {
  uint64 id = 1;
  string username = 2;
  int64 create_time = 3;
  int64 last_login = 4;
}

